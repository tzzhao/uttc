(this.webpackJsonputtc=this.webpackJsonputtc||[]).push([[0],{13:function(e,n,t){e.exports=t(26)},18:function(e,n,t){},19:function(e,n,t){},26:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),c=t(4),i=t.n(c),o=(t(18),t(12));t(19);function l(e,n){return{type:"Play Move Action",payload:{gridId:e,cellId:n}}}var u=t(1),s=t(2),d=t(3),m=function(e){return-1===e||-2===e},f=function(e){return-1!==e},v=Object(d.a)([function(e){return e.gameState}],(function(e){return e.map((function(e){return b(e)}))})),g=Object(d.a)([function(e){return e.history},v,function(e){return e.current}],(function(e,n,t){if(0===e.length||-1===t)return[0,1,2,3,4,5,6,7,8];var r=e[t];return-1===n[r.cellId]?[r.cellId]:n.reduce((function(e,n,t){return-1===n?[].concat(Object(s.a)(e),[t]):e}),[])})),h=Object(d.a)([v],(function(e){var n=b(e);if(-2===n){var t=e.reduce((function(e,n){return e+(0===n)}),0),r=e.reduce((function(e,n){return e+(1===n)}),0);return t===r?-2:t<r?0:1}return n})),p=Object(d.a)([h],(function(e){return f(e)})),b=function(e){for(var n=0;n<3;n++){var t=e[3*n],r=e[3*n+1],a=e[3*n+2],c=e[n],i=e[n+3],o=e[n+6];if(!m(t)&&t===r&&r===a)return t;if(!m(c)&&c===i&&i===o)return c}var l=e[4];if(!m(l)){if(e[0]===l&&l===e[8])return l;if(e[2]===l&&l===e[6])return l}return e.some((function(e){return-1===e}))?-1:-2},E=["circle","cross"],w=function(e){return a.a.createElement("img",{src:"".concat("/uttc","/assets/").concat(E[e.shape],"_").concat(e.isBlackBackground?"orange":"black",".svg")})},y=Object(u.b)((function(e,n){var t=e.gameState[n.gridId][n.cellId];return{isClickable:g(e).some((function(e){return e===n.gridId&&-1===t}))&&!p(e),value:t,nextPlayer:e.nextPlayer}}),(function(e,n){return{playMove:function(){e(l(n.gridId,n.cellId))}}}))((function(e){var n=e.gridId%2===0;return a.a.createElement("div",{className:"cell-container"},a.a.createElement("div",{className:"cell ".concat(n?"bg-black":"bg-orange"," ").concat(e.isClickable?"clickable":""),onClick:function(){return e.isClickable&&e.playMove()}},-1!==e.value?a.a.createElement(w,{shape:e.value,isBlackBackground:n}):e.isClickable?a.a.createElement(w,{shape:e.nextPlayer,isBlackBackground:n}):null))})),k=Object(u.b)((function(e,n){return{value:v(e)[n.gridId]}}),(function(e,n){return{playMove:function(){e(l(n.gridId,n.cellId))}}}))((function(e){var n=e.gridId%2===0,t=[0,1,2,3,4,5,6,7,8].map((function(n){return a.a.createElement(y,{key:n,gridId:e.gridId,cellId:n})}));return a.a.createElement("div",{className:"grid"},0===e.value||1===e.value?a.a.createElement("div",{className:"cells-container ".concat(n?"bg-black":"bg-orange")},a.a.createElement(w,{shape:e.value,isBlackBackground:n})):t)}));function I(e){return[0,1,2,3,4,5,6,7,8].map((function(e){return a.a.createElement("div",{key:e,className:"grid-container"},a.a.createElement(k,{gridId:e}))}))}function A(e){return a.a.createElement("div",{className:"winner-modal"},a.a.createElement("div",{className:"winner-overlay"}),a.a.createElement("div",{className:"winner-modal-container"},a.a.createElement("div",{className:"winner-message"},-2===e.winner?a.a.createElement("div",null,"It's a draw !"):a.a.createElement(r.Fragment,null,a.a.createElement("div",{className:"shape-container"},a.a.createElement(w,{shape:e.winner})),a.a.createElement("div",null,"Won !"))),a.a.createElement("button",{onClick:e.startAgain},"New Game")))}var N=function(e){var n=e.startAgain,t=e.previousAction,r=e.nextAction,c=Object(o.a)(e,["startAgain","previousAction","nextAction"]);return a.a.createElement("div",{className:"app-container"},a.a.createElement("div",{className:"header"},a.a.createElement("h1",null,"Ultimate Tic Tac Toe")),a.a.createElement("div",{className:"App"},a.a.createElement(I,null)),a.a.createElement("div",{className:"header"},a.a.createElement("div",{className:"button-group"},a.a.createElement("button",{onClick:n},"New Game"),a.a.createElement("button",{onClick:t},"Undo move"),a.a.createElement("button",{onClick:r},"Redo move"))),f(c.winner)?a.a.createElement(A,{startAgain:n,winner:c.winner}):null)},O=N=Object(u.b)((function(e){return{winner:h(e)}}),(function(e){return{startAgain:function(){return e({type:"Reset game state Action"})},previousAction:function(){return e({type:"Previous Action"})},nextAction:function(){return e({type:"Next Action"})}}}))(N),j=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function x(e,n){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),n&&n.onUpdate&&n.onUpdate(e)):(console.log("Content is cached for offline use."),n&&n.onSuccess&&n.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var S=t(6),P={nextPlayer:0,gameState:[[-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1]],history:[],current:-1},_=function(e,n,t){var r=e.nextPlayer,a=e.gameState.map((function(e){return Object(s.a)(e)}));a[n][t]=r;var c=e.current,i=e.history.slice(0,c+1);return i.push({gridId:n,cellId:t}),Object(S.a)({},e,{nextPlayer:1-r,gameState:a,history:i,current:c+1})},C=function(e){var n=e.history,t=e.current;if(0===n.length||t<0)return e;var r=e.gameState.map((function(e){return Object(s.a)(e)})),a=n[t];return r[a.gridId][a.cellId]=-1,Object(S.a)({},e,{nextPlayer:1-e.nextPlayer,gameState:r,current:t-1})},B=function(e){if(e.history.length<=e.current+1)return e;var n=e.gameState.map((function(e){return Object(s.a)(e)})),t=e.history[e.current+1];return n[t.gridId][t.cellId]=e.nextPlayer,Object(S.a)({},e,{nextPlayer:1-e.nextPlayer,gameState:n,current:e.current+1})},T=t(5),W=Object(T.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"Play Move Action":var t=n.payload,r=t.gridId,a=t.cellId;return _(e,r,a);case"Reset game state Action":return P;case"Previous Action":return C(e);case"Next Action":return B(e);default:return e}}),P,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());i.a.render(a.a.createElement(u.a,{store:W},a.a.createElement(a.a.StrictMode,null,a.a.createElement(O,null))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/uttc",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var n="".concat("/uttc","/service-worker.js");j?(!function(e,n){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(t){var r=t.headers.get("content-type");404===t.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):x(e,n)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(n,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):x(n,e)}))}}()}},[[13,1,2]]]);
//# sourceMappingURL=main.b5a19791.chunk.js.map